<div
  class="add-task-bar-container"
  @blendInOut
>
  @if (mode() === 'add') {
    <add-task-bar-add-mode
      [tabindex]="tabindex()"
      [isElevated]="isElevated()"
      [isDisableAutoFocus]="isDisableAutoFocus()"
      [planForDay]="planForDay()"
      [isAddToBottom]="isAddToBottom()"
      [isAddToBacklog]="isAddToBacklog()"
      [additionalFields]="additionalFields()"
      (afterTaskAdd)="onAfterTaskAdd($event)"
      (blurred)="onBlurred()"
      (switchToSearchMode)="switchToSearchMode()"
      @fade
    ></add-task-bar-add-mode>
  } @else {
    <add-task-bar-search-mode
      [tabindex]="tabindex()"
      [isElevated]="isElevated()"
      [isDisableAutoFocus]="isDisableAutoFocus()"
      [isAddToBacklog]="isAddToBacklog()"
      [taskIdsToExclude]="taskIdsToExclude()"
      (afterTaskAdd)="onAfterTaskAdd($event)"
      (blurred)="onBlurred()"
      (switchToAddMode)="switchToAddMode()"
      @fade
    ></add-task-bar-search-mode>
  }

  <div class="mode-indicator">
    <button
      class="mode-toggle"
      [class.active]="mode() === 'add'"
      (click)="switchToAddMode()"
      [attr.aria-label]="'Add mode'"
    >
      <span class="mode-icon">+</span>
    </button>
    <button
      class="mode-toggle"
      [class.active]="mode() === 'search'"
      (click)="switchToSearchMode()"
      [attr.aria-label]="'Search mode'"
    >
      <span class="mode-icon">ğŸ”</span>
    </button>
  </div>

  <div class="quick-toggles">
    <button
      class="quick-toggle"
      (click)="toggleIsAddToBottom()"
      [attr.aria-label]="isAddToBottom() ? 'Add to top' : 'Add to bottom'"
      [class.active]="isAddToBottom()"
    >
      <span class="toggle-icon">{{ isAddToBottom() ? 'â¬‡' : 'â¬†' }}</span>
    </button>
    <button
      class="quick-toggle"
      (click)="toggleIsAddToBacklog()"
      [attr.aria-label]="isAddToBacklog() ? 'Add to today' : 'Add to backlog'"
      [class.active]="isAddToBacklog()"
    >
      <span class="toggle-icon">{{ isAddToBacklog() ? 'ğŸ“‹' : 'ğŸ“…' }}</span>
    </button>
  </div>
</div>
