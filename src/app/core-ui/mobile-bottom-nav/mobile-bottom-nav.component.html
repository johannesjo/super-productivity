<nav
  class="mobile-bottom-nav"
  [class.visible]="isMobile()"
>
  <button
    mat-button
    class="nav-button"
    [class.active]="currentRoute().includes('/tag/' + todayTagId + '/tasks')"
    [routerLink]="todayRoute"
    [matTooltip]="T.G.TODAY | translate"
  >
    <mat-icon>wb_sunny</mat-icon>
    <span class="nav-label">{{ T.G.TODAY | translate }}</span>
  </button>

  <button
    mat-button
    class="nav-button"
    [class.active]="currentRoute() === '/planner'"
    routerLink="/planner"
    [matTooltip]="T.F.PLANNER.PLANNER | translate"
  >
    <mat-icon>edit_calendar</mat-icon>
    <span class="nav-label">{{ T.F.PLANNER.PLANNER | translate }}</span>
  </button>

  <button
    mat-fab
    class="add-task-button"
    color="primary"
    (click)="showAddTaskBar()"
    [matTooltip]="T.F.TASK.ADD | translate"
  >
    <mat-icon>add</mat-icon>
  </button>

  <button
    mat-button
    class="nav-button"
    [matMenuTriggerFor]="panelsMenu"
    [matTooltip]="T.MH.SIDE_PANEL_MENU | translate"
  >
    <mat-icon>view_sidebar</mat-icon>
    <span class="nav-label">{{ 'Panels' | translate }}</span>
  </button>

  <button
    mat-button
    class="nav-button"
    (click)="toggleMobileNav()"
    [matTooltip]="'Navigation' | translate"
  >
    <mat-icon>menu</mat-icon>
    <span class="nav-label">{{ 'Menu' | translate }}</span>
  </button>
</nav>

<mat-menu
  #panelsMenu="matMenu"
  class="mobile-bottom-nav-panels-menu"
>
  @for (button of sidePanelButtons(); track button.pluginId) {
    <button
      mat-menu-item
      (click)="onPluginButtonClick(button)"
      [class.active]="activePluginId() === button.pluginId && isShowPluginPanel()"
    >
      <plugin-icon
        [pluginId]="button.pluginId"
        [fallbackIcon]="button.icon || 'extension'"
      ></plugin-icon>
      <span>{{ button.label }}</span>
    </button>
  }

  <button
    mat-menu-item
    [disabled]="!isWorkViewPage()"
    [class.active]="isShowTaskViewCustomizerPanel()"
    [class.isCustomized]="taskViewCustomizerService.isCustomized()"
    (click)="toggleTaskViewCustomizer()"
  >
    <mat-icon>filter_list</mat-icon>
    <span>{{ T.GCF.KEYBOARD.TOGGLE_TASK_VIEW_CUSTOMIZER_PANEL | translate }}</span>
  </button>

  <button
    mat-menu-item
    [disabled]="!isRouteWithSidePanel()"
    [class.active]="isShowIssuePanel()"
    (click)="toggleIssuePanel()"
  >
    <mat-icon>dashboard_customize</mat-icon>
    <span>{{ T.MH.TOGGLE_SHOW_ISSUE_PANEL | translate }}</span>
  </button>

  <button
    mat-menu-item
    [disabled]="!isRouteWithSidePanel()"
    [class.active]="isShowNotes()"
    (click)="toggleNotes()"
  >
    <mat-icon>comment</mat-icon>
    <span>{{ T.MH.TOGGLE_SHOW_NOTES | translate }}</span>
  </button>
</mat-menu>
