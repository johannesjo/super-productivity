<!--<div class="first-line"-->
<!--layout="row"-->
<!--as-sortable-item-handle-->
<!--layout-align="space-between center"> -->
<div class="inner-wrapper"
     [class.isShowNotes]="isShowNotes">
  <div class="first-line">
    <button mat-icon-button
            aria-label="is updated"
            tabindex="2"
            (click)="isShowNotes = !isShowNotes;"
            *ngIf="task.isUpdated">
      <!--<mat-tooltip>-->
      <!--Click to show updates-->
      <!--</mat-tooltip>-->
      <i class="material-icons update update-icon">update</i>
    </button>


    <i class="material-icons handle"
       [class.handle-par]="!task.parentId"
       [class.handle-sub]="task.parentId">drag_handle</i>


    <button mat-icon-button
            class="play-btn ico-btn"
            (click)="startTask(task.id)"
            aria-label="mark as current"
            tabindex="2"
            *ngIf="!isDone && !isCurrent && !task.subTasks">
      <i class="material-icons">play_circle_filled</i>
    </button>

    <button mat-icon-button
            class="play-btn ico-btn"
            (click)="pauseTask(task.id)"
            tabindex="2"
            *ngIf="!isDone && isCurrent && !task.subTasks">
      <i class="material-icons">pause_circle_filled</i>
    </button>


    <a mat-icon-button
       class="ico-btn original-link-btn"
       aria-label="link"
       tabindex="2"
       target="_blank"
       external-link
       *ngIf="task.issueData?.url"
       [href]="task.issueData?.url">

      <mat-icon *ngIf="task.type !=='GITHUB'"
                aria-label="link">link
      </mat-icon>
      <mat-icon *ngIf="task.type ==='GITHUB'"
                aria-label="github">github-circle
      </mat-icon>
    </a>

    <div supEditOnClick
         contenteditable="true"
         class="title task-title"
         [value]="task.title"
         (editFinished)="updateTaskIfChanged($event.isChanged, task.id, $event.newVal)"
         tabindex="2"></div>

    <div class="time">
      <span *ngIf="task.subTasks && task.subTasks.length>0">âˆ‘</span>
      <span [innerHtml]="(task.timeSpent||'-') +' / ' + (task.timeEstimate||'-')"></span>
    </div>

    <div class="controls">
      <button mat-icon-button
              tabindex="2"
              class="ico-btn"
              [disabled]="task.subTasks && task.subTasks.length>0"
              aria-label="time estimation"
              (click)="estimateTime(task)">

        <i class="material-icons"
           aria-label="time estimation">access_time</i>
      </button>
      <button mat-icon-button
              class="ico-btn"
              aria-label="add sub task"
              *ngIf="!task.parentId&&!isDone"
              tabindex="2"
              (click)="addSubTask(task, $event);">

        <i class="material-icons"
           aria-label="add sub task">playlist_add</i>
      </button>
      <button mat-icon-button
              class="ico-btn"
              aria-label="notes"
              tabindex="2"
              [class.is-active]="isShowNotes"
              (click)="isShowNotes=!isShowNotes">

        <i class="material-icons"
           *ngIf="task.notes||task.issueData"
           aria-label="notes">insert_comment</i>
        <i class="material-icons"
           *ngIf="!task.notes&&!task.issueData">mode_comment</i>
      </button>
      <button mat-icon-button
              tabindex="2"
              aria-label="delete"
              class="ico-btn"
              (click)="deleteTask(task.id)">

        <i class="material-icons delete-icon"
           aria-label="delete">delete_forever</i>
      </button>
      <button mat-icon-button
              (click)="toggleTaskDone(task.id, isDone)"
              class="ico-btn mark-as-done-btn"
              tabindex="2"
              aria-label="un-/mark as done">
        <i class="material-icons delete-icon"
           *ngIf="task.isDone"
           aria-label="Mark as undone">undo</i>
        <i class="material-icons delete-icon"
           *ngIf="!task.isDone"
           aria-label="Mark as done">check</i>
      </button>
    </div>
  </div>

  <mat-progress-bar mode="determinate"
                    [value]="task.progress"></mat-progress-bar>


  <task-additional-info class="notes"
                        *ngIf="isShowNotes"
                        (onTaskNotesChanged)="onTaskNotesChanged(task.id, $event)"
                        [@expand]
                        [task]="task"></task-additional-info>

  <div class="sub-tasks"
       *ngIf="task.subTasks"
       [dragula]="subTaskListId"
       [dragulaModel]="task.subTasks">
    <task *ngFor="let task of task.subTasks; let i = index;"
          [task]="task">
    </task>
  </div>
</div>
